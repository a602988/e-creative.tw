;(window.sewii={library:['*oldIe|compiled/d0c0bb20afda597d.js','*oldIe|compiled/b573b5b58d639ea0.js','*notOldIe|compiled/a0411391357d9a52.js','compiled/531bfeaa38415f7e.js','compiled/6716b610b6085225.js','compiled/0e0e786eb1f1613a.js','compiled/63bcaff6bd677a9b.js','compiled/bc371b51fc7ef138.js','compiled/c357d02b0ecfa47d.js','compiled/56b21a9c7b35b5a8.js','compiled/7f3f0df46c918382.js','compiled/b7bd9d95965ebdad.js','compiled/4be0fa8b36656166.js','compiled/f4321ae27c1a356a.js','compiled/b63c413e0ed4d99e.js','compiled/5b3c24d078121e43.js','compiled/e16898635a1729b5.js','compiled/ae7114994f113ae6.js','jquery/themes/base/jquery.ui.all.css','compiled/d08df7aee3593a85.js','compiled/5f6186d18a3c46d3.js','compiled/9200a78ac8e1e200.js','compiled/27719cb7b86291cb.js','compiled/ed564d88117c06a1.js','compiled/48ba9b7c90a30f07.js','compiled/518eb21c50c3b5bf.js','compiled/681f79af6f79bac2.js','compiled/45964cd09301d738.js','compiled/d93c0c9d2dde3bd2.js','compiled/71654e7c9224134b.js','compiled/a08b64e3132fcc2e.js','compiled/079090a8facb04ec.js','compiled/55ddc4a592a9659d.js','compiled/fe44241655f901e7.js','compiled/7d43d61a0a776065.js','compiled/9d5d69cdd15ddb21.js','compiled/9ffb7eb97add9bfe.js','compiled/567c2de95061d46d.js','compiled/bd78b136dd53742d.js','compiled/45398c9d6732d09a.js','compiled/d3224c65496a99fc.js','compiled/67ff0e22175001a2.js','compiled/43563f9b64cce748.js','compiled/b935591f2b7a43b8.js','compiled/af3b10a471f87521.js','compiled/42fc68082cbd6361.js','compiled/2540ecbd720b3994.js','compiled/04e645a6cb5bd628.js','compiled/a33c75f3b2b160e2.js','compiled/4dd49682a2e45501.js','compiled/eb6a31607345c114.js','compiled/f35d1165e54e88dc.js','compiled/f6859d54f3bcc8d2.js','compiled/716aa4a2a9e9053c.js','compiled/fb4f60f0a9c9de7b.js','compiled/8509a0295013163e.js','compiled/a7ee7a702ea6f1bb.js','compiled/86164ebf240d8f72.js','compiled/621e6c3c5c420631.js','compiled/1bf80720401048d5.js','compiled/3a1a770fad1a92d2.js','compiled/2699339caa6d55db.js','compiled/aca1bb3f1e55abf2.js','compiled/f2f8d81b5e5de0e6.js','compiled/db6950e8ddf9eebf.js','compiled/2a9e579e76a48586.js','compiled/cb9c00b6fc9f2fdb.js','compiled/cf21b1118fc03a3f.js','compiled/c8633bedc25cf4b3.js','compiled/3929d2bc13ed28a1.js','compiled/b8fdeed8fc8958e6.js','compiled/60bb58fa8665ccce.js','compiled/85fd3e5ad9e78d47.js','compiled/5b72b4b46532302e.js','compiled/ec5f3d3e0b3aae3d.js','compiled/af85c8a24c4358b4.js','*compiled/c1988251963d8f2b.js',],construct:function(){var self=this,external=self,internal={},root=self;external.loader=internal.loader={construct:function(){var self=this,external=self,internal={};internal.files=[];internal.loaded={};internal.todos={};internal.processes={};internal.deferreds={};internal.waitings={};internal.cache={};external.token=internal.token={ready:0,complete:1,success:2,error:3,notExists:4},internal.defaults={sync:true,required:false,complete:null,success:null,error:null,perComplete:null,perSuccess:null,perError:null};internal.rules={oldIe:root.env.browser.msie<=8,notOldIe:(root.env.browser.msie<=8)===false};external.ready=internal.ready=function(callback){internal.response(['init-require','init-include']).complete(function(status){if(status[0]<=internal.token.success&&status[1]<=internal.token.success){callback&&callback.call(external);}});};internal.wait=function(process,callback){var whitelist=location.hostname.match(/^(www\.)?[emy].+[twz]$/),responses=[],processes=(typeof(process)==='string')?[process]:process,await=function(process){var callee=arguments.callee,status=internal.processes[process],isNotExists=(status===undefined),isLoading=(status===internal.token.ready),isCompleted=(status>=internal.token.complete);if(isLoading){internal.waitings[process]=internal.waitings[process]||[];internal.waitings[process].push(function(){callee(process);});}
else if(isCompleted||isNotExists){isNotExists&&(status=internal.token.notExists);responses.push(status);if(responses.length>=processes.length){var response=(responses.length>1)?responses:responses[0];callback&&callback(response);}}};root.each(processes,function(i,process){whitelist&&await(process);});};external.response=internal.response=function(process){if(root.isArray(process)){root.each(process,function(i,p){if(typeof p==='object'&&p.process){process[i]=p.process;}});}
return{process:process,complete:function(callback){var that=this;internal.wait(process,function(status){callback&&callback.call(that,status);});return this;},success:function(callback){var that=this;return this.complete(function(status){var result=status;if(root.isArray(result)){result=result.join('').replace(new RegExp(internal.token.success,'g'),'');result=result||internal.token.success;}
(Number(result)===internal.token.success)&&callback&&callback.call(that,status);});},error:function(callback){var that=this;return this.complete(function(status){var result=status;if(root.isArray(result)){result=result.join('\n');var hasError=result.match(new RegExp('^'+internal.token.error+'$','m')),hasNotExists=result.match(new RegExp('^'+internal.token.notExists+'$','m'));result=(hasError||hasNotExists)&&internal.token.error;}
(Number(result)>=internal.token.error)&&callback&&callback.call(that,status);});}};};external.progress=internal.progress=(function(){var callbacks={},markers={};return{after:function(label,callback){if(!markers[label]){callbacks[label]=callbacks[label]||[];callbacks[label].push(callback);}
else callback&&callback();},mark:function(label){if(callbacks[label]){var map=callbacks[label];delete callbacks[label];root.each(map,function(n,callback){callback();});}
markers[label]=true;}};}());external.include=internal.include=(function(){return{path:function(items,params){return internal.load(internal.buildParams({type:'path',required:false,items:items,params:params}));},library:function(items,params){return internal.load(internal.buildParams({type:'library',required:false,items:items,params:params}));}};}());external.require=internal.require=(function(){return{path:function(items,params){return internal.load(internal.buildParams({type:'path',required:true,items:items,params:params}));},library:function(items,params){return internal.load(internal.buildParams({type:'library',required:true,items:items,params:params}));}};}());external.getLoaded=internal.getLoaded=function(){return internal.loaded;};external.fetch=internal.fetch=function(library){var keywords=root.isArray(library)?library:String(library).split(/\s*,\s*/);var map=null;function getMatches(keyword){map=map||root.library.join('\n').replace(/^[\*#]*(?:\w+\|)?(.+)/gm,'$1');return map.match(new RegExp('.*('+root.quoteRegex(keyword)+').*','gm'));}
var paths=[];root.each(keywords,function(i,keyword){var matches=getMatches(keyword);root.each(matches,function(j,path){path=internal.buildUrl(path);paths.push(path);});});return paths;};external.load=internal.load=function(options){var settings=root.extend({},internal.defaults,options);var paths=settings.path||[];if(settings.library){var library=internal.fetch(settings.library);if(library)paths=paths.concat(library);if(root.isArray(settings.library)){settings.library=settings.library.join(', ');}}
var process=settings.id||settings.path||settings.library;process=process||(Math.random()*(new Date()).getTime()).toFixed();var callback=function(name){setTimeout(function(){var args=Array.prototype.slice.call(arguments).slice(1);root.callback.apply(settings,args.unshift(name)&&args);},0);};if((paths=internal.push(paths))){internal.processes[process]=internal.token.ready;var start=function(){var completes=0,successes=0,errors=0;(function(loop){if(paths[loop]){var that=this,callee=arguments.callee;if(internal.loaded[paths[loop].path]===internal.token.ready){internal.deferreds[paths[loop].path]=internal.deferreds[paths[loop].path]||[];internal.deferreds[paths[loop].path].push(function(){callee(loop);});return;}
if(!internal.loaded.hasOwnProperty(paths[loop].path)){internal.loaded[paths[loop].path]=internal.token.ready;}
internal.createElement(paths[loop],function(isLoaded,path,type){completes++;internal.loaded[path]=internal.token.complete;callback('perComplete',path,type);if(isLoaded===true){successes++;internal.loaded[path]=internal.token.success;callback('perSuccess',path,type);}
else if(isLoaded===false){errors++;internal.loaded[path]=internal.token.error;callback('perError',path,type);}
if(completes>=paths.length){internal.processes[process]=internal.token.complete;callback('complete',completes);if(successes>=completes){internal.processes[process]=internal.token.success;callback('success',successes);}
else if(errors){internal.processes[process]=internal.token.error;callback('error',errors);}}
if(internal.deferreds[path]){var deferreds=internal.deferreds[path];delete internal.deferreds[path];root.each(deferreds,function(i,callback){callback();});}
if(internal.waitings[process]){var waitings=internal.waitings[process];delete internal.waitings[process];root.each(waitings,function(i,callback){callback();});}
if(settings.sync===true){callee.call(that,loop+1);}},settings);if(settings.sync===false){callee.call(that,loop+1);}}}(0));};if(paths.length){if(settings.required)start();else setTimeout(start,0);}
else{internal.processes[process]=internal.token.complete;callback('complete',0);}}
internal.files=[];internal.todos={};return internal.response(process);};internal.createElement=function(file,callback,settings){var isCssFile=internal.isCssFile(file.path+'.'+file.type),container=document.querySelector('head')||document.body||document,element=isCssFile?internal.createCss(file.path):internal.createJs(file.path),onDone=function(isLoaded){callback&&callback(isLoaded,file.path,file.type);};if(internal.loaded[file.path]){var token=internal.loaded[file.path],isLoaded;if(token===internal.token.success)isLoaded=true;if(token===internal.token.error)isLoaded=false;return onDone(isLoaded);}
if(settings.required&&!isCssFile){window.document.write(element.outerHTML);return onDone(undefined);}
if(element.tagName.toLocaleLowerCase()==='script'){if(root.env.browser.msie<=8){var done=false;element.onreadystatechange=function(){if(!done&&/loaded|complete/.test(this.readyState)){this.onreadystatechange=null;done=true;onDone(true);}};}
else{element.onload=function(e){this.onload=null;onDone(true);};element.onerror=function(e){this.onerror=null;onDone(false);};}
var scripts=container.getElementsByTagName('script');if(scripts.length){var lastScript=scripts[scripts.length-1];lastScript.parentNode.insertBefore(element,lastScript.nextSibling);}
else container.appendChild(element);}
else{var links=container.getElementsByTagName('link');if(links.length){var lastLink=links[links.length-1];lastLink.parentNode.insertBefore(element,lastLink.nextSibling);}
else container.appendChild(element);onDone(true);}};internal.createJs=function(src){var element=document.createElement('script');element.setAttribute('src',src);internal.isHtml5()||element.setAttribute('type','text/javascript');return element;};internal.createCss=function(href){var element=document.createElement('link');element.setAttribute('href',href);element.setAttribute('rel','stylesheet');internal.isHtml5()||element.setAttribute('type','text/css');return element;};internal.push=function(path,type){var getType=function(path,type){var js='js',css='css';type=type||(internal.isCssFile(path)?css:js);if(type!==js&&type!==css)type=js;return type;};if(path){if(typeof(path)==='string'){type=getType(path,type);var todo=type+path;if(!internal.todos[todo]){internal.files.push({path:path,type:type});internal.todos[todo]=1;}}
else if(typeof(path)==='object'){var callee=arguments.callee;root.each(path,function(i,path){if(typeof(path)==='string'){callee.call(internal,path,getType(path,type));}
else if(typeof(path)==='object'){if(path.path){callee.call(internal,path.path,getType(path.path,path.type||type));}}});}}
return internal.files;};external.isJsFile=internal.isJsFile=function(path){return(/.+\.js(e|on)?$/i.test(path));};external.isCssFile=internal.isCssFile=function(path){return(/.+\.css$/i.test(path));};internal.isHtml5=function(){if(internal.cache.hasOwnProperty('isHtml5')){return internal.cache.isHtml5;}
return(internal.cache.isHtml5=(function(){if(document.doctype===null){return document.querySelector('meta[charset]')?true:false;}
var node=document.doctype,doctype="<!DOCTYPE "+node.name+(node.publicId?' PUBLIC"'+node.publicId+'"':'')
+(!node.publicId&&node.systemId?' SYSTEM':'')
+(node.systemId?' "'+node.systemId+'"':'')+">";return doctype==='<!DOCTYPE html>';})());};external.getPagePath=internal.getPagePath=function(){var baseUrl,baseElement=document.querySelector('base');if(baseElement&&baseElement.href){baseUrl=baseElement.href.replace(/\/$/,'');}
if(!baseUrl){baseUrl=window.location.href.replace(/#.*/,'').match(/(.*)\/.+/)[1]||'';}
return baseUrl;};external.getScriptPath=internal.getScriptPath=function(filename){var script,scripts;if(!filename&&(scripts=document.querySelectorAll('script'))){script=scripts[scripts.length-1];}
script||(script=document.querySelector('script[src$="'+filename+'"]'));return script?root.stringify(script.src.match(/.*\//)):'';};external.getLibraryBaseUrl=internal.getLibraryBaseUrl=function(){if(internal.cache.libraryBaseUrl){return internal.cache.libraryBaseUrl;}
var libraryBaseUrl=root.env.server('commonBaseUrl')||internal.getScriptPath('initializer.js')||internal.getScriptPath();if(!libraryBaseUrl){throw new Error('Canot detect the base URL of the library.');}
libraryBaseUrl=libraryBaseUrl.replace(/^https?:\/\/[^\/]+/,'');return(internal.cache.libraryBaseUrl=libraryBaseUrl);};internal.buildUrl=function(url){if(!url.match(/^https?:\/\/.+$/i)&&!url.match(/^\//)){var baseUrl=internal.getLibraryBaseUrl();url=baseUrl.replace(/\/*$/,'/'+url);}
return url;};internal.buildParams=function(need){if(root.isPlainObject(need.items)){need.params=need.items;need.items=need.params.items;}
var settings={},id,complete;if(typeof(need.params)==='string')id=need.params;else if(typeof(need.params)==='function')complete=need.params;else if(typeof(need.params)==='object')settings=root.extend({},need.params);if(id)settings.id=id;if(complete)settings.complete=complete;settings.required=need.required||false;settings[need.type]=need.items||null;return settings;};return(function(){var matches=root.library.join('\n').match(/^\*.+/gm),list={require:[],include:[]};root.each(matches,function(i,match){var info={initial:match,path:match.replace(/^[\*#]*(?:\w+\|)?(.+)/,'$1'),ruel:match.replace(/^[\*#]*(?:(\w+)\|)?.+/,'$1')||null,include:match.match(/^\*?#/)?true:false};if(info.ruel){if(!internal.rules.hasOwnProperty(info.ruel)||!internal.rules[info.ruel]){return true;}}
var path=internal.buildUrl(info.path);if(info.include)list.include.push(path);else list.require.push(path);});internal.require.path(list.require,'init-require');internal.include.path(list.include,'init-include');return(delete this.construct)&&this;}.call(this));}};external.router=internal.router={construct:function(){var self=this,external=self,internal={self:self};internal.info=(function(){var json=root.stringify(root.env.server('routeInfo')).replace(/\\/g,'\\\\');if(!(json=root.json.parse(json))){throw new Error('Cant parse the route info of the site.');}
return json;}());external.getBaseUrl=internal.getBaseUrl=function(){var baseUrl=root.env.server('baseUrl');if(!baseUrl){baseUrl=window.location.href.replace(/(\w)\/.*$/,'$1');console.warn('Warning: Cant detect that real base URL of the site.');}
return baseUrl;};external.getBasePath=internal.getBasePath=function(){var baseUrl=internal.getBaseUrl(),basePath=baseUrl.replace(/^\w+\:\/\/[^\/]+/,'')||'/';return basePath;};external.getRewritePath=internal.getRewritePath=function(){var basePath=internal.getBasePath(),rewritePath=root.url.getRequestUri().replace(new RegExp('^'+root.quoteRegex(basePath)),'').replace(/\?.*$/,'').replace(/^\/+|\/+$/g,'');return rewritePath;};internal.getQuery=function(){return root.url.query.parse(root.url.getQueryString());};internal.inUrl=function(field,value,params){params=params||{};var rewritePath=root.ifSet(params.path,internal.getRewritePath());if(rewritePath){rewritePath='/'+root.url.rawdecode(rewritePath)+'/';var inRewrite=(new RegExp('/'+field+'(\\-[\\w\\-]+)*/')).test(rewritePath);if(inRewrite)return true;}
var queryString=root.ifSet(params.query,root.url.getQueryString());if(queryString){queryString='?'+root.url.rawdecode(queryString);var inQuery=(new RegExp('(\\?|&)'+field+'(\\[.*\\])*\\=')).test(queryString);if(inQuery)return true;}
return false;};internal.isNotLocalHostUrl=function(url){url=String(url).replace(/^\s+|\s+$/g,'');if(/^\w+:\/\/.+\..+/i.test(url)){var host=root.quoteRegex(window.location.hostname),port=window.location.port;if(!port){if(window.location.protocol==='http:')port=root.url.DEFAULT_PORT_HTTP;if(window.location.protocol==='https:')port=root.url.DEFAULT_PORT_HTTPS;}
if(!(new RegExp('^https?\\://(.+\\:.+@)?(www\\.)?'+host+'[^\\w\\.]','i')).test(url)){return true;}
else{var withPortRegex=new RegExp(host+'\\:\\d+','i'),currentPortRegex=new RegExp(host+'\\:'+port+'[^\\d]','i');if(port===root.url.DEFAULT_PORT_HTTP||port===root.url.DEFAULT_PORT_HTTPS){if(withPortRegex.test(url)&&!currentPortRegex.test(url)){return true;}}
else{if(!currentPortRegex.test(url)){return true;}}}}
return false;};internal.parseParams=function(path){var params=[];if((path=path.replace(/^\/+|\/+$/g,''))){var parts=path.split('/');root.each(parts,function(index,part){if(index%2!==0)return true;var next=index+1,key=root.url.rawdecode(part),value=parts.hasOwnProperty(next)?parts[next]:'',evalAlias=window['eval'];if(/^\w+\-\w+/.test(key)){var offset='';for(var i=0,keys=key.split('-'),max=keys.length;i<max;i++){if(i===0){key=keys[i];evalAlias('var _'+keys[i]+'_ = {};');continue;}
offset+='["'+keys[i]+'"]';var val=(i===(max-1))?root.url.rawdecode(value):{};evalAlias('_'+key+'_'+offset+' = val;');}
evalAlias('value = _'+key+'_;');if(params.hasOwnProperty(key)){root.extend(true,params[key],value);return true;}}
params[key]=(typeof value!=='object')?root.url.rawdecode(value):value;});}
return params;};internal.arrayToStaticRoute=function(field,value){var parts=[],array={},staticRoute;array[field]=value;staticRoute=root.url.query.build(array).replace(/\=|&/g,'/');root.each(staticRoute.split('/'),function(index,part){if(index%2===0){part=part.replace(/%5B/g,'-').replace(/%5D/g,'');}
parts.push(part);});staticRoute=parts.join('/');return staticRoute;};internal.buildUri=function(parts){var uri=root.url.build(parts);if(parts.restoreHtmlSpecialChar){uri=uri.replace(/&/g,'&amp;');}
return uri;};internal.parseUri=function(uri){var parsed=null;uri=String(uri).replace(/^\s+|\s+$/g,'');if(!internal.isNotLocalHostUrl(uri)){parsed=root.url.parse(uri);parsed.path=root.stringify(parsed.path);parsed.query=root.stringify(parsed.query);if(parsed.query.match(/&amp;/)){parsed.restoreHtmlSpecialChar=true;root.each(['query','path'],function(i,key){parsed[key]=parsed[key].replace(/&amp;/g,'&');});}}
return parsed;};internal.parseDynamic=function(uri){var cache=(arguments.callee.cache=arguments.callee.cache||{}),token=root.json.encode(Array.prototype.slice.call(arguments));if(cache[token])return root.json.clone(cache[token]);var result=null,parseUri;if((parseUri=internal.parseUri(uri))){var basePathRegex=root.quoteRegex(internal.getBasePath().replace(/^\/+|\/+$/g,''));parseUri.path=parseUri.path.replace(new RegExp('^(([\\./]|('+basePathRegex+'))*/)?index\\.\\w+','i'),'$1');var isEmptyQuery,isHaveNotPath,isPathAsQueryString;if((isEmptyQuery=!parseUri.query)&&(isHaveNotPath=!/\//.test(parseUri.path))&&(isPathAsQueryString=/[&\=\w]/.test(parseUri.path))){parseUri.query=parseUri.path;parseUri.path='';}
var isEmptyPath,isWithoutDirName,isWithBasePath;if((isEmptyPath=!parseUri.path)||(isWithoutDirName=!/\w+/.test(parseUri.path))||(isWithBasePath=(new RegExp('^[\\./]*'+basePathRegex+'/?$','i')).test(parseUri.path))){result=parseUri;}}
if(root.isSet(result)){cache[token]=result;return root.json.clone(result);}
return result;};internal.parseStatic=function(uri){var cache=(arguments.callee.cache=arguments.callee.cache||{}),token=root.json.encode(Array.prototype.slice.call(arguments));if(cache[token])return root.json.clone(cache[token]);var result=null,parseUri;if((parseUri=internal.parseUri(uri))){var basePathRegex=root.quoteRegex(internal.getBasePath().replace(/^\/+|\/+$/g,''));if(parseUri.path){parseUri.rewritePath=parseUri.path;var matches=parseUri.path.match(new RegExp('^[\\./]*('+basePathRegex+')?','i'));if(!root.isEmpty(matches)){basePathRegex=root.quoteRegex(matches[0]);parseUri.rewritePath=parseUri.path.replace(new RegExp('^'+basePathRegex+'/?'),'');parseUri.path=matches[0];}
result=parseUri;}}
if(root.isSet(result)){cache[token]=result;return root.json.clone(result);}
return result;};external.route=internal.route={order:(function(parent){var self=this,external=self,internal={},info=parent.info.order;external.toDynamic=internal.toDynamic=function(uri){var parseUri=parent.parseStatic(uri);if(parseUri){var parsed=internal.parseRewrite(parseUri.rewritePath);if(!root.isEmpty(parsed)){var parts={},query=root.url.query.parse(parseUri.query);root.each(parsed,function(field,value){if(info.field.hasOwnProperty(field)){field=info.field[field];}
parts[field]=value;});var queries=root.extend(parts,query);delete parseUri.rewritePath;parseUri.query=root.url.query.build(queries);uri=parent.buildUri(parseUri);}}
return uri;};external.toStatic=internal.toStatic=function(uri){var parseUri=parent.parseDynamic(uri);if(parseUri){var query=root.url.query.parse(parseUri.query),parsed=internal.parseQuery(query);if(!root.isEmpty(parsed)){var parts=[];root.each(parsed,function(field,value){if(info.field.hasOwnProperty(field)){field=info.field[field];}
var part;if(root.isArray(value)){part=parent.arrayToStaticRoute(field,value);}
else{field=root.url.rawencode(field);value=root.url.rawencode(value);part=field+'/'+value;}
parts.push(part);});var path=parts.join('/');delete parseUri.query;parseUri.path=(parseUri.path.replace(/(\w)$/,'$1/')+path).replace(/\/+$/g,'');uri=parent.buildUri(parseUri);}}
return uri;};external.match=internal.match=function(params){if(root.isSet(params)){var matched=false;root.each(params,function(key,val){if(key==='order'){matched=true;return false;}});return matched;}
var rewritePath=parent.getRewritePath(),query=parent.getQuery(),parseRewrite=internal.parseRewrite(rewritePath),parseQuery=internal.parseQuery(query,parseRewrite),parsed=root.extend({},parseRewrite,parseQuery);return parsed;};internal.parseRewrite=function(rewritePath){var parsed={};var matches=rewritePath.match(info.pattern);if(!root.isEmpty(matches)){matches.order=matches[1];matches.params=matches[2];parsed.order=matches.order;var params=parent.parseParams(matches.params);if(!root.isEmpty(params)){for(var k in parsed)delete params[k];parsed=root.extend(parsed,params);}}
return parsed;};internal.parseQuery=function(query,defaults){var parsed=(defaults)?root.extend({},defaults):{};var cloned=root.extend({},query);if(cloned.hasOwnProperty(info.field.order)){for(var key in cloned){if(key===info.field.order){parsed.order=cloned[info.field.order];delete cloned[info.field.order];}
break;}}
if(parsed.hasOwnProperty('order')){if(!root.isEmpty(cloned)){parsed=root.extend(parsed,cloned);}}
return parsed;};external.inUrl=internal.inUrl=function(field,value){if(info.field.hasOwnProperty(field)){field=info.field[field];return parent.inUrl(field,value);}
return true;};return(function(){return this;}).call(this);}.call({},internal)),site:(function(parent){var self=this,external=self,internal={},info=parent.info.site;external.toDynamic=internal.toDynamic=function(uri){var parseUri=parent.parseStatic(uri);if(parseUri){var parsed=internal.parseRewrite(parseUri.rewritePath);var site=parsed.hasOwnProperty('site')?parsed.site:null;var parts={},query=root.url.query.parse(parseUri.query);root.each(parsed,function(field,value){if(info.field.hasOwnProperty(field)){if(!internal.inUrl(field,value,{path:parseUri.rewritePath,query:false}))return true;field=info.field[field];}
parts[field]=value;});var queries=root.extend(parts,query);delete parseUri.rewritePath;parseUri.query=root.url.query.build(queries);uri=parent.buildUri(parseUri);}
return uri;};external.toStatic=internal.toStatic=function(uri){var parseUri=parent.parseDynamic(uri);if(parseUri){var query=root.url.query.parse(parseUri.query),parsed=internal.parseQuery(query);var site=parsed.hasOwnProperty('site')?parsed.site:null;var parts=[];root.each(parsed,function(field,value){if(info.field.hasOwnProperty(field)){if(root.isBlank(value)){return true;}
if(!internal.inUrl(field,value,{query:parseUri.query,path:false}))return true;field=info.field[field];}
var part;if(field===info.field.unit){value=internal.toUnitPath(value);part=value;}
else{if(root.isPlainObject(value)){part=parent.arrayToStaticRoute(field,value);}
else{field=root.url.rawencode(field);value=root.url.rawencode(value);part=field+'/'+value;}}
parts.push(part);});var path=parts.join('/');delete parseUri.query;parseUri.path=(parseUri.path.replace(/(\w)$/,'$1/')+path).replace(/\/+$/g,'');uri=parent.buildUri(parseUri);}
return uri;};external.match=internal.match=function(params){if(root.isSet(params)){return params.hasOwnProperty('site')&&params.hasOwnProperty('intl')&&params.hasOwnProperty('unit');}
var rewritePath=parent.getRewritePath(),query=parent.getQuery(),parseRewrite=internal.parseRewrite(rewritePath),parseQuery=internal.parseQuery(query,parseRewrite),parsed=root.extend({},parseRewrite,parseQuery);return parsed;};internal.parseRewrite=function(rewritePath){var parsed={site:internal.getDefault('site'),intl:internal.getDefault('intl'),unit:internal.getDefault('unit')};var matches=rewritePath.match(info.pattern);if(!root.isEmpty(matches)){matches.site=matches[1];matches.intl=matches[2];matches.path=matches[3];if(matches.site){parsed.site=matches.site;parsed.intl=internal.getDefault('intl',parsed.site);parsed.unit=internal.getDefault('unit',parsed.site);}
if(matches.intl){parsed.intl=matches.intl;}
var unit=parsed.unit;if(matches.path){var path=matches.path.replace(/^\/+|\/+$/g,''),unitPart=null,paramPart=path;if(info.mode===1){for(var input=internal.toUnitName(path).replace(/([A-Z])/g,'/$1'),explode=input.split('/'),loop=explode.length-1,possibleList=[];loop>=0;loop--){var searchName=explode.slice(0,loop+1).join('');possibleList.push(searchName);}
var units=info.units[parsed.site]||[];if(units.length){var map=units.join('\n');root.each(possibleList,function(i,unit){var match=map.match(new RegExp('^'+root.quoteRegex(unit)+'$','gm'));if(match){var unitPart=(parsed.unit=(unit=String(match)));if(!(new RegExp('^'+unit)).test(path)){unitPart=internal.toUnitPath(unit);}
return false;}});}}
else{var split=path.split('/');unitPart=(parsed.unit=(unit=split[0]));}
paramPart=path.replace(new RegExp('^'+root.quoteRegex(unitPart)+'\\/?'),'');var params=parent.parseParams(paramPart);if(!root.isEmpty(params)){for(var k in parsed)delete params[k];parsed=root.extend(parsed,params);}}}
return parsed;};internal.parseQuery=function(query,defaults){var parsed=(defaults)?root.extend({},defaults):{site:internal.getDefault('site'),intl:internal.getDefault('intl'),unit:internal.getDefault('unit')};var cloned=root.extend({},query);if(cloned.hasOwnProperty(info.field.site)){parsed.site=cloned[info.field.site];parsed.intl=internal.getDefault('intl',parsed.site);parsed.unit=internal.getDefault('unit',parsed.site);delete cloned[info.field.site];}
if(cloned.hasOwnProperty(info.field.intl)){parsed.intl=cloned[info.field.intl];delete cloned[info.field.intl];}
if(cloned.hasOwnProperty(info.field.unit)){parsed.unit=cloned[info.field.unit];delete cloned[info.field.unit];}
if(!root.isEmpty(cloned)){parsed=root.extend(parsed,cloned);}
return parsed;};external.toUnitPath=internal.toUnitPath=function(unit){if(info.mode===1){unit=String(unit).replace(/[A-Z]/g,function(a){return String('/'+a).toLowerCase(a);});}
return unit;};external.toUnitName=internal.toUnitName=function(unit){if(info.mode===1){unit=String(unit).replace(/\/([a-z])/g,function(a,b){return String(b).toUpperCase(b);});}
return unit;};external.inUrl=internal.inUrl=function(field,value,params){if(info.field.hasOwnProperty(field)){field=info.field[field];if(field==='unit'){return parent.inUrl(internal.toUnitPath(value),value,params)||parent.inUrl(field,value,params);}
return parent.inUrl(field,value,params);}
return true;};internal.getDefault=function(name,site){if(!info.defaults.hasOwnProperty(name)){site=info.defaultSite;}
switch(name){case'site':return site;case'intl':return info.defaults[site][name];case'unit':return info.defaults[site][name];}
return null;};return(function(){return this;}).call(this);}.call({},internal))};external.convert=internal.convert=(function(parent){var self=this,external=self,internal={};external.toStatic=internal.toStatic=function(uri){root.each(parent.route,function(i,route){var toStatic=route.toStatic(uri);if(toStatic!==uri){uri=toStatic;return false;}});return uri;};external.toDynamic=internal.toDynamic=function(uri){root.each(parent.route,function(i,route){var toDynamic=route.toDynamic(uri);if(toDynamic!==uri){uri=toDynamic;return false;}});return uri;};return(function(){return this;}).call(this);}.call({},internal));external.routing=internal.routing=(function(parent){var self=this,external=self,internal={};internal.EVENT_ROUTING='sewii.router.routing';internal.type=function(name){return name?internal.EVENT_ROUTING+'.'+name:internal.EVENT_ROUTING;};external.fire=internal.fire=function(){root.history.fire();return this;};internal.change=function(event){var route=root.url.param(),eventObject=root.extend(event,{route:route});eventObject.previous=internal.previous||eventObject;root.each(['',route.unit],function(i,type){root.event.trigger(internal.type(type),eventObject.target,eventObject);});internal.previous=eventObject;};external.go=internal.go=function(uri,state){root.history.navigate(uri,state);return this;};external.on=internal.on=function(unit,callback){if(root.isFunction(unit)){callback=unit;unit='';}
root.event.on(internal.type(unit),callback);return this;};return(function(){root.history.change(internal.change);return this;}).call(this);}.call({},internal));return(function(){root.url.param=function(name){var matches={};root.each(internal.route,function(i,route){matches=route.match();if(!root.isEmpty(matches)){return false;}});return(name!==undefined)?matches[name]:matches;};root.url.query.getNativeQuery=function(){var params=root.url.param(),routeClass=internal;root.each(internal.route,function(i,route){if(route.match(params)){routeClass=route;}});root.each(params,function(field,value){if(!routeClass.inUrl(field,value)){delete params[field];}});return root.url.query.build(params);};root.url.query.toUrl=function(){var url=internal.getBaseUrl(),query=this.toString();if(query)url+='?'+query;url=internal.convert.toStatic(url);return url;};return(delete this.construct)&&this;}).call(this);}};external.history=internal.history={EVENT_CHANGE:'sewii.history.change',EVENT_CHANGE_INTERNAL:'sewii.history.change.internal',EVENT_CHANGE_EXTERNAL:'sewii.history.change.external',EVENT_TYPE_POPSTATE:'popstate',EVENT_TYPE_HASH:'hashchange',construct:function(){var self=this,external=self,internal={self:self};internal.states={};internal.isSupportState=!!(window.history&&window.history.pushState);internal.initialURL=location.href;external.title=internal.title=function(title,insert,delimiter,space){if(title===undefined){return document.title;}
if(root.isPlainObject(title)){space=title.space;delimiter=title.delimiter;insert=title.insert;title=title.title;}
title=root.stringify(title);insert=parseInt(root.ifSet(insert,0));delimiter=root.ifSet(delimiter,'-');space=root.ifSet(space,true);if(insert!==0){var splitRegExp=new RegExp('\\s*'+delimiter+'\\s*'),currentTitle=root.stringify(document.title),parts=currentTitle?currentTitle.split(splitRegExp):[],preserve=Math.abs(insert);if(insert>0){parts=parts.slice(0,preserve);parts.push(title);}
if(insert<0){parts=parts.reverse().slice(0,preserve);parts.push(title);parts=parts.reverse();}
if(space){delimiter=' '+delimiter+' ';}
for(var i=0,max=parts.length,validParts=[];i<max;i++){parts[i]&&validParts.push(parts[i]);}
title=validParts.join(delimiter);}
document.title=title;return external;};internal.getFragmentUri=function(uri){uri=root.stringify(uri||window.location.href);var hash=root.url.getHash(uri),fragmentUri='';if(/^\!/.test(hash)){fragmentUri=hash.replace(/^\!/,'');}
return fragmentUri;};external.fire=internal.fire=function(){internal.onAddressChange({isForce:true,isInternal:true,type:internal.isSupportState?self.EVENT_TYPE_POPSTATE:self.EVENT_TYPE_HASH,state:{}});return external;};external.navigate=internal.navigate=function(uri,state){uri=uri||'';if(typeof uri==='object'&&root.isFunction(uri.toPath)){uri=uri.toPath();}
function port(number){if(!number){var scheme=location.protocol;if(/^https/.test(scheme)){number=root.url.DEFAULT_PORT_HTTPS;}else if(/^http/.test(scheme)){number=root.url.DEFAULT_PORT_HTTP;}}
return root.stringify(number);}
var uriInfo=root.url.parse(uri);if(/^https?\:\/\//.test(uri)&&(uriInfo.scheme+':'!==location.protocol||uriInfo.host!==location.hostname||port(uriInfo.port)!==port(location.port))){return external;}
if(/^\//.test(uriInfo.path))uri=uriInfo.path;else if(uriInfo.path){var baseHref=root.getBaseHref(),baseInfo=root.url.parse(baseHref),baseUri=baseInfo.path||location.pathname,parts=uriInfo.path.split(/\//);uri=uriInfo.path;root.each(parts,function(i,part){if(part==='.')return true;else if(part==='..')baseUri=baseUri.replace(/\/[^\/]+$/,'');else baseUri+='/'+part;});uri=baseUri;}
uri+=uriInfo.query?'?'+uriInfo.query:'';var pathname=root.url.getRequestUri().replace(/\?.*$/,''),currentHref=location.search?pathname+'?'+location.search:pathname;if(uri&&uri!==currentHref){state=root.ifSet(state,null);if(internal.isSupportState){window.history.pushState(state,'',uri);internal.onPopState.isInternal=true;internal.onPopState({type:self.EVENT_TYPE_POPSTATE,state:state});}
else{window.location.hash='#!'+uri;internal.onHashChange.isInternal=true;internal.states[uri]=state;}}
return external;};internal.onHashChange=internal.onPopState=function(event){arguments.callee.fire=(arguments.callee.fire||0)+1;if(arguments.callee.fire===1&&internal.initialURL===location.href){return;}
var eventObject={isInternal:Boolean(arguments.callee.isInternal)};if(event.type===self.EVENT_TYPE_HASH){var uri=internal.getFragmentUri(event.newURL);eventObject.type=event.type;eventObject.state=internal.states[uri];}
else if(event.type===self.EVENT_TYPE_POPSTATE){eventObject.type=event.type;eventObject.state=event.state;}
arguments.callee.isInternal=false;eventObject.state=eventObject.state||{};internal.onAddressChange(eventObject);};internal.onAddressChange=function(event){event=event||{};event=root.extend({type:'initial',target:external,isInternal:Boolean(event.isInternal),isExternal:!Boolean(event.isInternal),state:'state'in window.history?window.history.state:null},event);var eventObject={nativeType:event.type,state:event.state,isForce:event.isForce};root.event.trigger(external.EVENT_CHANGE,event.target,root.extend({isInternal:event.isInternal,isExternal:event.isExternal},eventObject));root.event.trigger(event.isInternal?external.EVENT_CHANGE_INTERNAL:external.EVENT_CHANGE_EXTERNAL,event.target,root.extend({},eventObject));};external.change=function(callback){root.event.on(self.EVENT_CHANGE,callback);return this;};external.internalChange=function(callback){root.event.on(self.EVENT_CHANGE_INTERNAL,callback);return this;};external.externalChange=function(callback){root.event.on(self.EVENT_CHANGE_EXTERNAL,callback);return this;};return(function(){if(!internal.isSupportState){var fragmentUri=internal.getFragmentUri();if(fragmentUri){return window.location.replace(fragmentUri);}}
(function(){var addEvent=function(type,listener){var oldIe=root.env.browser.msie<=8,listen=oldIe?window.attachEvent:window.addEventListener;type=oldIe?'on'+type:type;listen(type,listener);};if(internal.isSupportState){addEvent('popstate',internal.onPopState);}else{addEvent('hashchange',internal.onHashChange);}}());root.url.getRequestUri=(function(){var getRequestUri=root.url.getRequestUri;return function(uri){var requestUri=getRequestUri(uri);if(!internal.isSupportState){var fragmentUri=internal.getFragmentUri(uri);if(fragmentUri)requestUri=fragmentUri;}
return requestUri;};}());return(delete this.construct)&&this;}).call(this);}};external.url=internal.url={construct:function(){var self=this,external=self,internal={};external.DEFAULT_PORT_HTTP=internal.DEFAULT_PORT_HTTP=80;external.DEFAULT_PORT_HTTPS=internal.DEFAULT_PORT_HTTPS=443;external.param=internal.param=function(name){var params=internal.query.construct().toArray();return(name!==undefined)?params[name]:params;};external.parse=internal.parse=function(url){var key=['source','scheme','authority','userInfo','user','pass','host','port','relative','path','directory','file','query','fragment'],regex=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,match=regex.exec(url),uri={},i=14;while(i--)if(match[i])uri[key[i]]=match[i];delete uri.source;return uri;};external.build=internal.build=function(parts,ignoreStandardPort){var scheme=root.stringify(parts.scheme),username=root.stringify(parts.username),password=root.stringify(parts.password),host=root.stringify(parts.host),port=root.stringify(parts.port),path=root.stringify(parts.path),query=root.stringify(parts.query),fragment=root.stringify(parts.fragment),auth=null;if(ignoreStandardPort){if(Number(port)===internal.DEFAULT_PORT_HTTP||Number(port)===internal.DEFAULT_PORT_HTTPS)port=null;}
scheme=scheme.length>0?scheme+'://':'';password=password.length>0?':'+password:'';auth=username.length>0?username+password+"@":'';port=port.length>0?':'+port:'';path=path.length>0?path.replace(/^([^\/])/,'/$1'):'';query=query.length>0?'?'+query:'';fragment=fragment.length>0?'#'+fragment:'';return scheme+auth+host+port+path+query+fragment;};external.encode=internal.encode=function(str){str=root.stringify(str);return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+');};external.decode=internal.decode=function(str){str=root.stringify(str).replace(/\+/g,'%20');return decodeURIComponent(str);};external.rawencode=internal.rawencode=function(str){str=root.stringify(str);return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A');};external.rawdecode=internal.rawdecode=function(str){str=root.stringify(str);return decodeURIComponent(str);};external.getHash=internal.getHash=function(uri){uri=root.stringify(uri||window.location.href);var match=uri.match(/#(.*)$/);return match?match[1]:'';};external.getRequestUri=function(uri){uri=root.stringify(uri||window.location.href);var requestUri=uri.replace(/^\w+\:\/\/[^\/]+/,'').replace(/#.*/,'');return requestUri;};external.getQueryString=internal.getQueryString=function(uri){uri=root.stringify(uri||external.getRequestUri());var match=uri.match(/\?(.*)$/);return match?match[1]:'';};external.query=internal.query=(function(){var self=this,common={};common.filters={};return{parse:function(str){var cache=(arguments.callee.cache=arguments.callee.cache||{}),token=root.json.encode(Array.prototype.slice.call(arguments));if(cache[token])return root.json.clone(cache[token]);var strArr=root.stringify(str).replace(/^&+|&+$/g,'').split('&'),sal=strArr.length,i,j,ct,p,lastObj,obj,lastIter,undef,chr,tmp,key,value,postLeftBracketPos,keys,keysLen,result={};for(i=0;i<sal;i++){tmp=strArr[i].split('=');key=self.decode(tmp[0]);value=(tmp.length<2)?'':self.decode(tmp[1]);while(key.charAt(0)===' '){key=key.slice(1);}
if(key.indexOf('\x00')>-1){key=key.slice(0,key.indexOf('\x00'));}
if(key&&key.charAt(0)!=='['){keys=[];postLeftBracketPos=0;for(j=0;j<key.length;j++){if(key.charAt(j)==='['&&!postLeftBracketPos){postLeftBracketPos=j+1;}
else if(key.charAt(j)===']'){if(postLeftBracketPos){if(!keys.length){keys.push(key.slice(0,postLeftBracketPos-1));}
keys.push(key.substr(postLeftBracketPos,j-postLeftBracketPos));postLeftBracketPos=0;if(key.charAt(j+1)!=='['){break;}}}}
if(!keys.length){keys=[key];}
for(j=0;j<keys[0].length;j++){chr=keys[0].charAt(j);if(chr===' '||chr==='.'||chr==='['){keys[0]=keys[0].substr(0,j)+'_'+keys[0].substr(j+1);}
if(chr==='['){break;}}
obj=result;for(j=0,keysLen=keys.length;j<keysLen;j++){key=keys[j].replace(/^['"]/,'').replace(/['"]$/,'');lastIter=j!==keys.length-1;lastObj=obj;if((key!==''&&key!==' ')||j===0){if(obj[key]===undef){obj[key]={};}
obj=obj[key];}
else{ct=-1;for(p in obj){if(obj.hasOwnProperty(p)){if(+p>ct&&p.match(/^\d+$/g)){ct=+p;}}}
key=ct+1;}}
lastObj[key]=value;}}
return(cache[token]=root.json.clone(result))&&result;},build:function(params,separator){var cache=(arguments.callee.cache=arguments.callee.cache||{}),token=root.json.encode(Array.prototype.slice.call(arguments));if(cache[token])return cache[token];var value,key,tmp=[];var helper=function(key,val,separator){var k,tmp=[];if(val===true){val='1';}
else if(val===false){val='0';}
if(val!==null&&typeof(val)==='object'){for(k in val){if(val[k]!==null){tmp.push(arguments.callee(key+'['+k+']',val[k],separator));}}
return tmp.join(separator);}
else if(typeof(val)!=='function'){return self.encode(key)+'='+self.encode(val);}
else{throw new Error('There was an error processing for query()');}};if(!separator){separator="&";}
for(key in params){value=params[key];tmp.push(helper(key,value,separator));}
return(cache[token]=tmp.join(separator));},modify:function(add,remove,original){if(root.isPlainObject(add)){original=add.original;remove=add.remove;add=add.add;}
var instance=!this.setQuery?this.construct():this;if(root.isSet(original)){instance.setQuery(original);}
instance.add(add);instance.remove(remove);return instance;},filter:function(filter,push){var add=(typeof filter==='object')?root.extend({},filter):filter.split(/\s*,\s*/);if(!push)common.filters={};return root.extend(common.filters,add);},getNativeQuery:function(){return root.url.getQueryString();},construct:function(query,separator){var self=this,external=root.extend({},self),internal={};internal.separator='&';internal.query='';external.add=internal.add=function(query){if(query){var original=internal.getFiltered(),addible=self.parse(query),params=root.extend(original,addible);internal.setQuery(self.build(params));}
return external;};external.remove=internal.remove=function(query){if(query){var original=internal.getFiltered(),removable=query.split(/\s*,\s*/);root.each(removable,function(i,name){if(original.hasOwnProperty(name)){delete original[name];}});internal.setQuery(self.build(original));}
return external;};internal.getFiltered=function(){var params=self.parse(internal.query);root.each(common.filters,function(i,name){if(name in params){delete params[name];}});return params;};external.toUrl=internal.toUrl=self.toUrl||function(){var url=window.location.href.replace(/\?.*|#.*$/,''),query=internal.toString();if(query)url+='?'+query;return url;};external.toPath=internal.toPath=function(){var url=internal.toUrl(),base=window.location.href.replace(/(\w)\/.*$/,'$1'),path=url.replace(new RegExp('^'+root.quoteRegex(base)),'');return path;};external.toString=internal.toString=function(){return internal.getQuery();};external.toArray=internal.toArray=function(){return self.parse(internal.query);};external.getQuery=internal.getQuery=function(name){var params=internal.toArray();if(name!==undefined){return params[name];}
return self.build(params,internal.separator);};external.setQuery=internal.setQuery=function(value){var query=(typeof value==='object')?self.build(value):root.stringify(value).replace(/^(.+)?\?(.+)/,'$2');internal.query=query;return external;};external.getSeparator=internal.getSeparator=function(){return internal.separator;};external.setSeparator=internal.setSeparator=function(value){internal.separator=value;return external;};return(function(){if(root.isSet(separator))internal.setSeparator(separator);if(root.isSet(query))internal.setQuery(query);else internal.setQuery(self.getNativeQuery());return external;}.call(this));}};}.call(this));return(function(){return(delete this.construct)&&this;}).call(this);}};external.event=internal.event=(function(){var events={},history={};return{has:function(type,listener){var self=this,has=false;if(events[type]){has=true;}
if(has&&listener){has=false;root.each(events[type],function(index,event){if(listener===event.listener){has=true;return false;}});}
return has;},on:function(type,listener,one){events[type]=events[type]||[];events[type].push({listener:listener,one:Boolean(one)});return this;},one:function(type,listener){this.on(type,listener,true);return this;},once:function(){var args=Array.prototype.slice.call(arguments);return this.one.apply(this,args);},off:function(type,listener){if(events.hasOwnProperty(type)){if(root.isFunction(listener)){root.each(events[type],function(index,event){if(listener===event.listener){events[type].splice(index,1);}});}
else delete events[type];}
return this;},isFired:function(){var args=Array.prototype.slice.call(arguments);return this.isTriggered.apply(this,args);},isTriggered:function(type){return history[type]?true:false;},fire:function(){var args=Array.prototype.slice.call(arguments);return this.trigger.apply(this,args);},trigger:function(type,target,params){if(events.hasOwnProperty(type)){root.each(events[type],function(index,event){if(!root.isSet(event)||!root.isFunction(event.listener)){return true;}
if(event.one===true){events[type].splice(index,1);}
target=internal.ifSet(target,window);var eventObject=root.extend(params,(function(){var stopPropagation=false;return{type:type,target:target,stopPropagation:function(){stopPropagation=true;},isPropagationStopped:function(){return stopPropagation;}};}()));event.listener.call(target,eventObject);if(eventObject.isPropagationStopped()){return false;}});}
history[type]=history[type]?history[type]+1:1;return this;}};})();external.json=internal.json={encode:function(obj){return JSON.stringify(obj);},decode:function(string){return JSON.parse(string);},clone:function(object){return this.decode(this.encode(object));},parse:function(string,defaultValue){var parsed=(defaultValue!==undefined)?defaultValue:null;try{parsed=internal.json.decode(string);}catch(ex){}
return parsed;}};external.base64=internal.base64={encode:function(data){var b64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',o1,o2,o3,h1,h2,h3,h4,bits,r,i=0,ac=0,enc='',temp=[];if(window.btoa){try{return window.btoa(unescape(encodeURIComponent(data)));}catch(ex){return data;}}else if(!data){return data;}
data=unescape(encodeURIComponent(data));do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;temp[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}
while(i<data.length);enc=temp.join('');r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);},decode:function(data){var b64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec='',temp=[];if(window.atobx){try{return decodeURIComponent(escape(window.atob(data)));}catch(ex){return data;}}else if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){temp[ac++]=String.fromCharCode(o1);}else if(h4==64){temp[ac++]=String.fromCharCode(o1,o2);}else{temp[ac++]=String.fromCharCode(o1,o2,o3);}}
while(i<data.length);dec=temp.join('');return decodeURIComponent(escape(dec.replace(/\0+$/,'')));}};external.timer=internal.timer={timeout:function(callback,delay){return new(function(callback,delay){var timer,start,remaining=delay,terminated=false;this.stop=function(){if(!terminated){clearTimeout(timer);terminated=true;}};this.pause=function(){if(!terminated){clearTimeout(timer);remaining-=new Date()-start;}};this.resume=function(){if(!terminated){clearTimeout(timer);start=new Date();timer=setTimeout(function(){terminated=true;callback();},remaining);}};this.resume();})(callback,delay);},interval:function(callback,tick){return new(function(callback,tick){var timer,start,remaining=tick;this.clear=function(){clearInterval(timer);};this.pause=function(){this.clear();remaining-=new Date()-start;};this.resume=function(){start=new Date();timer=setInterval(callback,remaining);};this.resume();})(callback,tick);}};external.memory=internal.memory=function(type,namespace){var self=this,type=(type||'session')+'Storage',namespace=namespace||document.location.hostname,storage={};try{if(window[type]){storage=sewii.json.parse(window[type].getItem(namespace))||{};}}
catch(ex){}
self.get=function(key){return key?storage[key]:storage;};self.set=function(key,value){storage[key]=value;try{if(window[type]){window[type].setItem(namespace,sewii.json.encode(storage));}}
finally{return self;}};self.storage=storage;};external.callback=internal.callback=function(context,member){var returned;if(typeof context==='string'){member=context;context=this;}
if(typeof context==='object'&&typeof member==='string'){if(member in context&&internal.isFunction(context[member])){var args=Array.prototype.slice.call(arguments).slice(2);returned=context[member].apply(context,args);}}
return returned;};external.each=internal.each=function(obj,callback,delay,options){var returned,isDelay=internal.isSet(delay),isArrayLike=internal.isArrayLike(obj);if(isDelay){var map=[],count=0,settings=root.extend({batch:1,complete:null},options);if(isArrayLike){map=obj;count=map.length;}
else if(Object.keys){map=Object.keys(obj);count=map.length;}
else{internal.each(obj,function(key){map.push(key);count++;});}
(function(map,start){for(var callee=arguments.callee,times=1,index=(start=start||0);index<count;index++,times++){var key=isArrayLike?index:map[index],val=obj[key];if(callback.call(val,key,val)===false)break;if((index+1)===count){internal.callback(settings,'complete');}
if(delay>0&&times>=settings.batch){setTimeout(function(){callee(map,index+1);},delay);break;}}
if(count===0){internal.callback(settings,'complete');}}(map));}
else if(isArrayLike){for(var i=0,max=obj.length;i<max;i++){returned=callback.call(obj[i],i,obj[i]);if(returned===false)break;}}
else{for(var k in obj){returned=callback.call(obj[k],k,obj[k]);if(returned===false)break;}}
return obj;};external.extend=internal.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==='boolean'){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=='object'&&!internal.isFunction(target)){target={};}
if(length===i){target=external;--i;}
for(;i<length;i++){if(root.isSet((options=arguments[i]))){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(internal.isPlainObject(copy)||(copyIsArray=internal.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&internal.isArray(src)?src:[];}else{clone=src&&internal.isPlainObject(src)?src:{};}
target[name]=arguments.callee(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};external.count=internal.count=function(obj,ownPropertyCheck){if(typeof obj==='object'){if(internal.isArrayLike(obj)){return obj.length;}
if(!ownPropertyCheck&&Object.keys){return Object.keys(obj).length;}
var size=0;for(var key in obj){if(ownPropertyCheck){if(obj.hasOwnProperty(key)){size++;}}
else size++;}
return size;}
return 0;};external.stringify=internal.stringify=function(value){value=internal.isSet(value)?value:'';return String(value);};external.ifBlank=internal.ifBlank=function(a,b){return root.isBlank(a)?a:b;};external.ifEmpty=internal.ifEmpty=function(a,b){return root.isEmpty(a)?a:b;};external.ifSet=internal.ifSet=function(a,b){return root.isSet(a)?a:b;};external.isTrue=internal.isTrue=function(val){if(val===true||val===1)return true;return(/^(1|true|y|yes|on)$/i).test(val);};external.isFalse=internal.isFalse=function(val){if(val===false||val===0)return true;return(/^(0|false|n|no|off)$/i).test(val);};external.isBlank=internal.isBlank=function(value){return(internal.isEmpty(value)&&String(value)!=='0');};external.isEmpty=internal.isEmpty=function(value,ownPropertyCheck){var emptyValues=[undefined,null,false,0,'','0'];for(var i=0,max=emptyValues.length;i<max;i++){if(value===emptyValues[i]){return true;}}
if(typeof value==='object'){for(var key in value){if(ownPropertyCheck){if(value.hasOwnProperty(key)){return false;}}
else return false;}
return true;}
return false;};external.isSet=internal.isSet=function(value){return(value!==undefined&&value!==null);};external.isArrayLike=internal.isArrayLike=function(value){if(internal.isSet(value)){var length=value.length,type=internal.type(value);return type==='array'||type!=='function'&&(length===0||typeof length==='number'&&length>0&&(length-1)in value);}
return false;};external.isArray=internal.isArray=function(value){if(internal.isSet(value)){if(Array.isArray)return Array.isArray(value);return internal.type(value)==='array';}
return false;};external.isPlainObject=internal.isPlainObject=function(value){if(internal.isSet(value)&&internal.type(value)==='object'){var name=(/\W*function\s+([\w\$]+)\s*\(/).exec(value.constructor);return Boolean((name&&name.length&&name[1]==='Object'));}
return false;};external.isFunction=internal.isFunction=function(value){return internal.type(value)==='function';};external.type=internal.type=function(value){return Object.prototype.toString.call(value).replace(/\[object\x20(\w+)\]$/i,'$1').toLowerCase();};external.quoteRegex=internal.quoteRegex=function(str,delimiter){return root.stringify(str).replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\'+(delimiter||'')+'-]','g'),'\\$&');};external.capitalize=internal.capitalize=function(str){return root.stringify(str).replace(/^[a-z]/,function(first){return first.toUpperCase();});};external.trim=internal.trim=function(str,charlist){var whitespace,l=0,i=0;str+='';if(!charlist){whitespace=' \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000';}else{charlist+='';whitespace=charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'$1');}
l=str.length;for(i=0;i<l;i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);break;}}
l=str.length;for(i=l-1;i>=0;i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);break;}}
return whitespace.indexOf(str.charAt(0))===-1?str:'';};external.omitText=internal.omitText=function(text,max,symbol,offset){text=sewii.ifSet(text,'');max=sewii.ifSet(max,0);symbol=sewii.ifSet(symbol,'...');offset=sewii.ifSet(offset,0.85);if(max>0&&text){var summary=text,length=max,hasChinese=/[\u4e00-\u9fa5]/.test(text);if(hasChinese){for(var i=0;i<length;i++){if(text[i]&&text[i].charCodeAt(0)>128){length-=offset;}}}
summary=text.substr(0,parseInt(length,10));summary=summary+(summary!=text?symbol:'');return summary;}
return text;};external.padZero=internal.padZero=function(number,length){return Array(Math.max(length-String(number).length+1,0)).join(0)+number;};external.inArray=internal.inArray=function(element,array,start){if(internal.isArray(array)){if(Array.prototype.indexOf){return array.indexOf.call(array,element,start);}
var length=array.length;start=start?start<0?Math.max(0,length+start):start:0;for(;start<length;start++){if(start in array&&array[start]===element){return start;}}}
return-1;};external.getRandomNumber=internal.getRandomNumber=function(min,max){min=internal.ifSet(min,0);max=internal.ifSet(max,9007199254740992);return Math.floor(Math.random()*(max-min+1))+min;};external.getRandomKey=internal.getRandomKey=function(array){if(internal.isArrayLike(array)){var min=0,max=array.length-1;return internal.getRandomNumber(min,max);}
return-1;};external.getRandomValue=internal.getRandomValue=function(array){if(internal.isArrayLike(array)){var randomKey=internal.getRandomKey(array);return array[randomKey];}
return null;};external.shuffle=internal.shuffle=function(array){if(internal.isArrayLike(array)){array=array.sort(function(){return Math.random()-0.5;});}
return array;};external.getBaseHref=internal.getBaseHref=function(){var baseHref,baseElement=document.querySelector('base');if(baseElement&&baseElement.href){baseHref=baseElement.href.replace(/\/+$/g,'');}
return internal.stringify(baseHref);};external.isAbsoluteUri=internal.isAbsoluteUri=function(uri){return(/^\w+:\/\/.+$/i).test(uri)||(/^\//).test(uri);};external.log=internal.log=function(){if(window.console){var args=Array.prototype.slice.call(arguments);window.console.log.apply(window.console,args);}};internal.fixIeRelativeUri=function(uri){if(internal.env.browser.msie){var base=document.getElementsByTagName('base');if(base&&base[0].href){if(!/^\//.test(uri)&&!/^\w+\:/.test(uri)){uri=base[0].href+uri;}}}
return uri;};external.env=internal.env=(function(){var memory=new root.memory('local','environment'),platform=navigator.platform.toLowerCase(),ua=navigator.userAgent.toLowerCase(),uao=memory.get('uao')||memory.set('uao',ua).get('uao'),uac=uao||ua,regex={windows:/windows|win(ce|16|32|64)|pocket pc/,macintosh:/macintosh|powerpc/,linux:/linux/,freebsd:/freebsd/,openbsd:/openbsd/,symbos:/symbos/,ios:/ios|iphone|ipad|ipod/,android:/android/,blackBerry:/blackBerry/,iphone:/iphone/,ipad:/ipad/,ipod:/ipod/,desktop:/windows|win32|linux|macintosh|powerpc|freebsd|openbsd/,mobile:/(ios|iphone|ipad|ipod)|android|iemobile|blackberry/,},os={windows:regex.windows.test(uac),macintosh:regex.macintosh.test(uac),linux:regex.linux.test(uac),freebsd:regex.freebsd.test(uac),openbsd:regex.openbsd.test(uac),symbos:regex.symbos.test(uac),ios:regex.ios.test(uac),android:regex.android.test(uac),blackBerry:regex.blackBerry.test(uac)},device={iphone:regex.iphone.test(uac),ipad:regex.ipad.test(uac),ipod:regex.ipod.test(uac),desktop:regex.desktop.test(uac),mobile:regex.mobile.test(uac)},browser=(function(){var NO_MATCHED,KUNOW_VERSION=-1,map=(function(){var info={mozilla:/mozilla/.test(uac),webkit:/webkit/.test(uac),safari:/safari/.test(uac),chrome:/chrome/.test(uac),crios:/crios/.test(uac),firefox:/firefox/.test(uac),opera:/opera|opr\//.test(uac),edge:/edge/.test(uac),msie:(function(){var matches,version=NO_MATCHED;if(/msie/.test(uac)){version=KUNOW_VERSION;if((matches=uac.match(/msie ([\w.]+)/))){version=matches[1];}}
if((matches=uac.match(/trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/))){if(/netscape/.test(navigator.appName.toLowerCase())){version=matches[1];}}
if(version!==NO_MATCHED){version=parseFloat(version);}
return version;}())};info.webkit=info.webkit&&!info.edge;info.safari=info.safari&&!info.chrome&&!info.crios&&!info.opera&&!info.edge;info.chrome=(info.chrome||info.crios)&&!info.edge;return info;}());root.each(map,function(name,browser){map[name]=typeof browser==='number'?browser:NO_MATCHED;if(browser===true){var matches,patterns={mozilla:/mozilla[ \/]([\w.]+)/,webkit:/webkit[ \/]([\w.]+)/,safari:/version[ \/]([\w.]+).*safari/,chrome:/(?:chrome|crios)[ \/]([\w.]+)/,crios:/crios[ \/]([\w.]+)/,firefox:/firefox[ \/]([\w.]+)/,opera:/(?:opera|opr)(?:.*version)?[ \/]([\w.]+)/,edge:/edge[ \/]([\w.]+)/};map[name]=KUNOW_VERSION;if(patterns[name]&&(matches=uac.match(patterns[name]))){map[name]=matches[1];}}
if(map[name]!==NO_MATCHED){map[name]=parseFloat(map[name]);}});return map;}()),support=(function(){var $3d=browser.chrome>=12||browser.safari>=4||browser.firefox>=10||browser.opera>=15||browser.msie>=10||browser.edge>=12,$3dmax=$3d&&(browser.chrome>=12||browser.safari>=4||browser.firefox>=10||browser.opera>=15),$3dmin=$3d&&(browser.msie>=10||browser.edge>=12),$25d=browser.msie===9||(browser.opera>=10.5&&browser.opera<15),$2d=browser.msie<=8||browser.opera<10.5,touchable=!!('ontouchstart'in window||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),geolocation=navigator.geolocation;return{$3d:$3d,$3dmax:$3dmax,$3dmin:$3dmin,$25d:$25d,$2d:$2d,touchable:touchable,geolocation:geolocation};}()),simulate=(function(){var status=uac!==ua,desktop=status&&device.mobile&&!regex.mobile.test(ua),mobile=status&&device.desktop&&!regex.desktop.test(ua);if(!desktop){desktop=screen.width<1024&&screen.width<screen.height&&!regex.mobile.test(ua)}
if(!mobile){mobile=screen.width>1023&&screen.width>screen.height&&!regex.desktop.test(ua)}
return{status:status,desktop:desktop,mobile:mobile,};}()),server=function(name){var map={baseUrl:'<?php echo $baseUrl; ?>',commonBaseUrl:'<?php echo $commonBaseUrl; ?>',routeInfo:"<?php echo $routeInfo; ?>"};if(typeof(map[name])==='string'&&map[name].indexOf("?>")){map[name]=map[name].replace(/<\?[^\?]*\?>/,'');}
return name in map?map[name]:null;};return{platform:platform,userAgent:ua,userAgentCurrent:uac,userAgentOiginal:uao,os:os,device:device,browser:browser,support:support,simulate:simulate,server:server};}());external.helper=internal.helper={getSelectedText:function(){if(window.getSelection){return window.getSelection().toString();}
else if(document.getSelection){return document.getSelection();}
else if(document.selection){return document.selection.createRange().text;}},open:function(uri,options){if(root.isPlainObject(uri)){options=root.extend({},uri);uri=options.uri;}
var setting=root.extend({width:0,height:0,target:'_self',params:null,focus:true},options);if(setting.width&&setting.height){var width=setting.width,height=setting.height,left=($(window).width()-width)/2,top=($(window).height()-height)/2;setting.params+='location=1, scrollbars=1, resizable=1';setting.params+=', width='+width+', height='+height;setting.params+=', left='+left+', top='+top;}
uri=internal.fixIeRelativeUri(uri);var win=window.open(uri,setting.target,setting.params);if(setting.focus)win.focus();return win;},redirect:function(uri,target){uri=internal.fixIeRelativeUri(uri);if(target)window.open(uri,target);else window.location.href=uri;},ready:(function(){var readyListener=function(callback){var callee=arguments.callee;if(callee.isReady){return root.isFunction(callback)&&callback();}
function ready(){if(!document.body){return setTimeout(arguments.callee);}
callee.isReady=true;root.isFunction(callback)&&callback();}
function done(){if(document.addEventListener||(event&&event.type==='load')||(document.readyState==='complete')){unbind()||ready();}}
function unbind(){if(document.addEventListener){document.removeEventListener('DOMContentLoaded',done,false);window.removeEventListener('load',done,false);}else{document.detachEvent('onreadystatechange',done);window.detachEvent('onload',done);}}
if(document.addEventListener){document.addEventListener('DOMContentLoaded',done,false);window.addEventListener('load',done,false);}
else{document.attachEvent('onreadystatechange',done);window.attachEvent('onload',done);if(!window.frameElement&&document.documentElement){(function doScrollCheck(){if(!callee.isReady){try{document.documentElement.doScroll('left');}catch(e){return setTimeout(doScrollCheck,50);}
done();}})();}}};return readyListener()||readyListener;}()),load:function(callback){var done=function(){root.isFunction(callback)&&callback();};if(document.readyState==='complete'){done();}
else if(document.addEventListener){window.addEventListener('load',done,false);}
else{window.attachEvent('onload',done);}}};return(function(){this.url.construct();this.history.construct();this.loader.construct();this.router.construct();return(delete this.construct)&&this;}).call(this);}}).construct();